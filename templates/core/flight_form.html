{% extends 'core/base.html' %}
{% load widget_tweaks %}

{% block title %}âœˆï¸ Ø¥Ø¶Ø§ÙØ© Ø­Ø¬Ø² Ø·ÙŠØ±Ø§Ù†{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto mt-8 bg-white p-6 rounded-lg shadow">
  <h1 class="text-2xl font-bold mb-6">âœˆï¸ Ø¥Ø¶Ø§ÙØ© Ø­Ø¬Ø² Ø·ÙŠØ±Ø§Ù†</h1>
  <span class="text-sm text-gray-500">Ø§Ù„ÙƒØ§Ø±Øª: {{ card.ub_code }}</span>

  <form method="post" enctype="multipart/form-data" class="space-y-6 mt-6">
    {% csrf_token %}

    <!-- Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø¬Ø² -->
    <div>
      <label class="block text-sm font-medium">Ø´Ø±ÙƒØ© Ø§Ù„Ø·ÙŠØ±Ø§Ù†</label>
      {{ form.airline|add_class:"w-full border rounded p-2" }}
    </div>

    <div>
      <label class="block text-sm font-medium">PNR</label>
      {{ form.pnr|add_class:"w-full border rounded p-2" }}
    </div>

    <div class="grid grid-cols-2 gap-4">
      <div>
        <label class="block text-sm font-medium">Ø³Ø¹Ø± Ø§Ù„Ù†Øª ğŸ’µ</label>
        {{ form.net_price|add_class:"w-full border rounded p-2" }}
      </div>
      <div>
        <label class="block text-sm font-medium">Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ ğŸ’µ</label>
        {{ form.sell_price|add_class:"w-full border rounded p-2" }}
      </div>
    </div>

    <!-- Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯ÙØ¹ -->
    <div>
      <label class="block text-sm font-medium">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ ğŸ’³</label>
      {{ form.payment_method|add_class:"w-full border rounded p-2"|attr:"id:payment-method" }}
    </div>

    <div id="payment-file-field" style="display:none;">
      <label class="block text-sm font-medium">Ù…Ù„Ù Ø§Ù„Ø¯ÙØ¹</label>
      {{ form.payment_file }}
    </div>

    <div id="payment-link-field" style="display:none;">
      <label class="block text-sm font-medium">Ø±Ø§Ø¨Ø· Ø§Ù„Ø¯ÙØ¹</label>
      {{ form.payment_link|add_class:"w-full border rounded p-2" }}
    </div>

    <!-- Ù…Ù„ÙØ§Øª -->
    <div>
      <label class="block text-sm font-medium">Ø§Ù„ÙØ§ØªÙˆØ±Ø©</label>
      {{ form.invoice_file }}
    </div>

    <div>
      <label class="block text-sm font-medium">Ø§Ù„ÙØ§ÙˆØªØ´Ø±</label>
      {{ form.voucher_file }}
    </div>

    <button type="submit" class="mt-4 px-6 py-2 bg-blue-600 text-white rounded">
      ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø­Ø¬Ø²
    </button>
  </form>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const paymentMethod = document.getElementById("payment-method");
    const fileField = document.getElementById("payment-file-field");
    const linkField = document.getElementById("payment-link-field");

    function toggleFields() {
      const value = paymentMethod.value;
      fileField.style.display = (value === "cash" || value === "bank") ? "block" : "none";
      linkField.style.display = (value === "link") ? "block" : "none";
    }

    if (paymentMethod) {
      paymentMethod.addEventListener("change", toggleFields);
      toggleFields();
    }
  });
</script>
{% endblock %}
