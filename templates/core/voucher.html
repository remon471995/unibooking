{% load static %}
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù‚Ø³ÙŠÙ…Ø© Ø§Ù„Ø¥Ù‚Ø§Ù…Ø© - {{ booking.voucher_code }}</title>
    <style>
        @page { size: a4 portrait; margin: 1.5cm; }

        body {
            font-family: "DejaVu Sans", "Arial", sans-serif;
            font-size: 10pt;
            color: #333;
            position: relative;
        }

        /* Watermark */
        @media print {
            .watermark {
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%) rotate(-25deg);
                width: 600px;
                height: 600px;
                opacity: 0.07;
                z-index: -1;
                text-align: center;
                pointer-events: none;
            }
            .watermark img { width: 300px; }
        }

        .container { border: 1px solid #e0e0e0; border-radius: 8px; padding: 15px; margin-bottom: 40px; background: #fff; }
        .header-table { width: 100%; margin-bottom: 20px; }
        .brand-title { font-size: 22pt; font-weight: bold; color: #0d6efd; margin: 0; }
        .voucher-title { font-size: 14pt; font-weight: bold; color: #333; border-bottom: 2px solid #0d6efd; padding-bottom: 4px; }
        .status { font-size: 10pt; font-weight: bold; color: #198754; }
        .section-title { font-size: 13pt; font-weight: bold; color: #0d6efd; margin: 20px 0 10px; border-bottom: 1px solid #ccc; }
        .details-table { width: 100%; border-collapse: collapse; margin-bottom: 15px; }
        .details-table td { padding: 10px; border: 1px solid #ddd; background: #f8f9fa; vertical-align: top; }
        .label { font-size: 9pt; color: #666; display: block; margin-bottom: 2px; }
        .value { font-size: 11pt; font-weight: bold; }
        .footer { text-align: center; font-size: 9pt; color: #555; margin-top: 30px; border-top: 1px solid #eee; padding-top: 10px; }
        .policy-box { background: #fff8f0; border: 1px dashed #f39c12; padding: 12px; border-radius: 6px; font-size: 9.5pt; color: #444; }
        .print-btn { margin: 20px auto; display: block; background: #0d6efd; color: #fff; padding: 10px 20px; border-radius: 6px; border: none; font-size: 12pt; cursor: pointer; }
        .print-btn:hover { background: #0b5ed7; }

        .page-break { page-break-before: always; }
    </style>
</head>
<body>

<!-- Watermark -->
<div class="watermark">
  <img src="{% static 'logo_khamees.png' %}" alt="Watermark">
</div>

<!-- Ø²Ø± Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© -->
<button class="print-btn" onclick="window.print()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ù†Ø³Ø®ØªÙŠÙ†</button>

<!-- ==================== Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ==================== -->
<div class="container" dir="rtl">
    <h2 class="section-title">Ù‚Ø³ÙŠÙ…Ø© Ø§Ù„Ø¥Ù‚Ø§Ù…Ø© (Ø¹Ø±Ø¨ÙŠ)</h2>
    <table class="header-table">
        <tr>
            <td style="width: 40%;"><img src="{% static 'logo_khamees.png' %}" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ø®Ù…ÙŠØ³" style="height:80px;"></td>
            <td style="width: 60%; text-align: left;">
                <div class="brand-title">UniBooking</div>
                <div class="voucher-title">Ù‚Ø³ÙŠÙ…Ø© Ø§Ù„Ø¥Ù‚Ø§Ù…Ø©</div>
                <div class="status">Ø§Ù„Ø­Ø¬Ø² Ù…Ø¤ÙƒØ¯ âœ…</div>
            </td>
        </tr>
    </table>

    <table class="details-table">
        <tr>
            <td><span class="label">Ø±Ù‚Ù… Ø§Ù„Ø­Ø¬Ø²</span><span class="value">{{ booking.voucher_code }}</span></td>
            <td style="text-align: center;">
                <img src="{{ qr_data_url }}" alt="QR Code" style="width:70px; height:70px;"><br><small>Ø§Ù…Ø³Ø­ Ø§Ù„Ø±Ù…Ø² Ù„Ù„ØªÙØ§ØµÙŠÙ„</small>
            </td>
        </tr>
    </table>

    <h2 class="section-title">ØªÙØ§ØµÙŠÙ„ Ù…ÙƒØ§Ù† Ø§Ù„Ø¥Ù‚Ø§Ù…Ø©</h2>
    <table class="details-table">
        <tr><td><span class="label">Ø§Ø³Ù… Ø§Ù„ÙÙ†Ø¯Ù‚</span><span class="value">{{ booking.hotel_name }}</span></td></tr>
        <tr><td><span class="label">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</span><span class="value">{{ booking.hotel_address|default:"-" }}</span></td></tr>
    </table>

    <h2 class="section-title">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø­Ø¬Ø²</h2>
    <table class="details-table">
        <tr>
            <td><span class="label">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</span><span class="value">{{ booking.checkin|date:"d M, Y" }}</span></td>
            <td><span class="label">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</span><span class="value">{{ booking.checkout|date:"d M, Y" }}</span></td>
        </tr>
        <tr><td colspan="2"><span class="label">Ø¹Ø¯Ø¯ Ø§Ù„Ù„ÙŠØ§Ù„ÙŠ</span><span class="value">{{ booking.nights }}</span></td></tr>
        <tr>
            <td colspan="2">
                <span class="label">Ø§Ù„ÙˆØ¬Ø¨Ø§Øª</span>
                <span class="value">
                  {% if booking.meal_plan == "RO" %} Ø¥Ù‚Ø§Ù…Ø© ÙÙ‚Ø·
                  {% elif booking.meal_plan == "BB" %} Ø¥ÙØ·Ø§Ø± ÙÙ‚Ø·
                  {% elif booking.meal_plan == "HB" %} Ù†ØµÙ Ø¥Ù‚Ø§Ù…Ø© (Ø¥ÙØ·Ø§Ø± + Ø¹Ø´Ø§Ø¡)
                  {% elif booking.meal_plan == "FB" %} Ø¥Ù‚Ø§Ù…Ø© ÙƒØ§Ù…Ù„Ø© (Ø¥ÙØ·Ø§Ø± + ØºØ¯Ø§Ø¡ + Ø¹Ø´Ø§Ø¡)
                  {% elif booking.meal_plan == "AI" %} Ø´Ø§Ù…Ù„ ÙƒÙ„ÙŠÙ‹Ø§
                  {% elif booking.meal_plan == "UAI" %} Ø´Ø§Ù…Ù„ ÙƒÙ„ÙŠÙ‹Ø§ Ø¨Ù„Ø³
                  {% else %} {{ booking.meal_plan|default:"-" }}
                  {% endif %}
                </span>
            </td>
        </tr>
    </table>

    <h2 class="section-title">Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø¥Ù„ØºØ§Ø¡ ÙˆØ§Ù„ØªØ¹Ø¯ÙŠÙ„</h2>
    <div class="policy-box">
        {% if booking.cancellation_policy == "refundable" and booking.refundable_until %}
            <p>ğŸ”¹ Ø¥Ù„ØºØ§Ø¡ Ù…Ø¬Ø§Ù†ÙŠ Ø­ØªÙ‰ <strong>{{ booking.refundable_until|date:"d M, Y" }}</strong>.</p>
            <p>ğŸ”¹ Ø¨Ø¹Ø¯ Ù‡Ø°Ø§ Ø§Ù„ØªØ§Ø±ÙŠØ® ÙŠØ¹ØªØ¨Ø± Ø§Ù„Ø­Ø¬Ø² <strong>ØºÙŠØ± Ù‚Ø§Ø¨Ù„ Ù„Ù„Ø¥Ù„ØºØ§Ø¡ Ø£Ùˆ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„</strong>.</p>

        {% elif booking.cancellation_policy == "refundable_with_penalty" and booking.refundable_until and booking.cancellation_penalty_value %}
            <p>ğŸ”¹ ÙŠÙ…ÙƒÙ† Ø§Ù„Ø¥Ù„ØºØ§Ø¡ Ø¨Ø±Ø³ÙˆÙ… <strong>{{ booking.cancellation_penalty_value }}</strong>
               {% if booking.cancellation_penalty_type == "percent" %}%{% else %} {{ booking.currency|default:"KWD" }}{% endif %}
               Ø­ØªÙ‰ <strong>{{ booking.refundable_until|date:"d M, Y" }}</strong>.</p>
            <p>ğŸ”¹ Ø¨Ø¹Ø¯ Ù‡Ø°Ø§ Ø§Ù„ØªØ§Ø±ÙŠØ® ÙŠØ¹ØªØ¨Ø± Ø§Ù„Ø­Ø¬Ø² <strong>ØºÙŠØ± Ù‚Ø§Ø¨Ù„ Ù„Ù„Ø¥Ù„ØºØ§Ø¡ Ø£Ùˆ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„</strong>.</p>

        {% elif booking.cancellation_policy == "non_refundable" %}
            <p>âš ï¸ Ù‡Ø°Ø§ Ø§Ù„Ø­Ø¬Ø² <strong>ØºÙŠØ± Ù‚Ø§Ø¨Ù„ Ù„Ù„Ø¥Ù„ØºØ§Ø¡ Ø£Ùˆ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„</strong>.</p>

        {% else %}
            <p>ğŸ”¹ Ù„Ù… ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø³ÙŠØ§Ø³Ø© Ø¥Ù„ØºØ§Ø¡.</p>
        {% endif %}
    </div>

    <h2 class="section-title">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©</h2>
    <div class="policy-box">
        <p>â° ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ÙˆØµÙˆÙ„ Ù…Ù† 14:00 Ø­ØªÙ‰ 15:00.</p>
        <p>â° ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ù‚Ø¨Ù„ 12:00 Ø¸Ù‡Ø±Ù‹Ø§.</p>
        <p>ğŸªª Ø¨Ø·Ø§Ù‚Ø© Ù‡ÙˆÙŠØ© Ø£Ùˆ Ø¬ÙˆØ§Ø² Ø³ÙØ± Ù…Ø·Ù„ÙˆØ¨ Ø¹Ù†Ø¯ Ø§Ù„ÙˆØµÙˆÙ„.</p>
        <p>ğŸ’° Ù‚Ø¯ ÙŠØ·Ù„Ø¨ Ø§Ù„ÙÙ†Ø¯Ù‚ Ù…Ø¨Ù„Øº ØªØ£Ù…ÙŠÙ† Ø¹Ù†Ø¯ Ø§Ù„ÙˆØµÙˆÙ„.</p>
        <p>â­ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø®Ø§ØµØ© ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø§Ù„ØªÙˆØ§ÙØ±.</p>
        <p>ğŸ’¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± ØªØ´Ù…Ù„ Ø§Ù„Ø¶Ø±Ø§Ø¦Ø¨ ÙˆØ§Ù„Ø®Ø¯Ù…Ø§Øª Ø¨Ø§Ø³ØªØ«Ù†Ø§Ø¡ Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©/Ø§Ù„Ø¨ÙŠØ¦Ø© Ø¥Ù† ÙˆØ¬Ø¯Øª.</p>
    </div>

    <div class="footer">
        <p>ğŸ“ ÙˆØ§ØªØ³Ø§Ø¨: (+965) 1899777</p>
        <p>ğŸŒ Ø´ÙƒØ±Ø§Ù‹ Ù„Ø§Ø®ØªÙŠØ§Ø±ÙƒÙ… Ø§Ù„Ø®Ù…ÙŠØ³ Ù„Ù„Ø³ÙØ± ÙˆØ§Ù„Ø³ÙŠØ§Ø­Ø©</p>
        <img src="{% static 'logo_khamees.png' %}" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ø®Ù…ÙŠØ³" style="height:40px;">
    </div>
</div>

<!-- ğŸ”¹ ÙØ§ØµÙ„ Ù„Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© -->
<div class="page-break"></div>

<!-- ==================== Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© ==================== -->
<div class="container" dir="ltr">
    <h2 class="section-title">Accommodation Voucher (English)</h2>
    <table class="header-table">
        <tr>
            <td style="width: 40%;"><img src="{% static 'logo_khamees.png' %}" alt="Al Khamees Logo" style="height:80px;"></td>
            <td style="width: 60%; text-align: right;">
                <div class="brand-title">UniBooking</div>
                <div class="voucher-title">Accommodation Voucher</div>
                <div class="status">Confirmed âœ…</div>
            </td>
        </tr>
    </table>

    <table class="details-table">
        <tr>
            <td><span class="label">Reservation Number</span><span class="value">{{ booking.voucher_code }}</span></td>
            <td style="text-align: center;">
                <img src="{{ qr_data_url }}" alt="QR Code" style="width:70px; height:70px;"><br><small>Scan QR for details</small>
            </td>
        </tr>
    </table>

    <h2 class="section-title">Accommodation Details</h2>
    <table class="details-table">
        <tr><td><span class="label">Hotel Name</span><span class="value">{{ booking.hotel_name }}</span></td></tr>
        <tr><td><span class="label">Address</span><span class="value">{{ booking.hotel_address|default:"-" }}</span></td></tr>
    </table>

    <h2 class="section-title">Booking Details</h2>
    <table class="details-table">
        <tr>
            <td><span class="label">Check-in</span><span class="value">{{ booking.checkin|date:"d M, Y" }}</span></td>
            <td><span class="label">Check-out</span><span class="value">{{ booking.checkout|date:"d M, Y" }}</span></td>
        </tr>
        <tr><td colspan="2"><span class="label">Nights</span><span class="value">{{ booking.nights }}</span></td></tr>
        <tr>
            <td colspan="2">
                <span class="label">Meal Plan</span>
                <span class="value">
                  {% if booking.meal_plan == "RO" %} Room Only
                  {% elif booking.meal_plan == "BB" %} Bed & Breakfast
                  {% elif booking.meal_plan == "HB" %} Half Board
                  {% elif booking.meal_plan == "FB" %} Full Board
                  {% elif booking.meal_plan == "AI" %} All Inclusive
                  {% elif booking.meal_plan == "UAI" %} Ultra All Inclusive
                  {% else %} {{ booking.meal_plan|default:"-" }}
                  {% endif %}
                </span>
            </td>
        </tr>
    </table>

    <h2 class="section-title">Cancellation & Amendment Policy</h2>
    <div class="policy-box">
        {% if booking.cancellation_policy == "refundable" and booking.refundable_until %}
            <p>ğŸ”¹ Free cancellation until <strong>{{ booking.refundable_until|date:"d M, Y" }}</strong>.</p>
            <p>ğŸ”¹ After this date, booking will be <strong>non-refundable</strong>.</p>

        {% elif booking.cancellation_policy == "refundable_with_penalty" and booking.refundable_until and booking.cancellation_penalty_value %}
            <p>ğŸ”¹ Cancellation fee of <strong>{{ booking.cancellation_penalty_value }}</strong>
               {% if booking.cancellation_penalty_type == "percent" %}%{% else %} {{ booking.currency|default:"KWD" }}{% endif %}
               until <strong>{{ booking.refundable_until|date:"d M, Y" }}</strong>.</p>
            <p>ğŸ”¹ After this date, booking will be <strong>non-refundable</strong>.</p>

        {% elif booking.cancellation_policy == "non_refundable" %}
            <p>âš ï¸ This booking is <strong>non-refundable</strong>.</p>

        {% else %}
            <p>ğŸ”¹ Cancellation policy not defined.</p>
        {% endif %}
    </div>

    <h2 class="section-title">Additional Information</h2>
    <div class="policy-box">
        <p>â° Check-in from 14:00 to 15:00.</p>
        <p>â° Check-out before 12:00 noon.</p>
        <p>ğŸªª Passport or valid ID is required at check-in.</p>
        <p>ğŸ’° A refundable deposit may be required upon check-in.</p>
        <p>â­ Special requests are subject to availability.</p>
        <p>ğŸ’¡ All rates include taxes & service charges, except city/environmental tax if applicable (payable at hotel).</p>
    </div>

    <div class="footer">
        <p>ğŸ“ WhatsApp: (+965) 1899777</p>
        <p>ğŸŒ Thank you for choosing Al Khamees Travel & Tourism</p>
        <img src="{% static 'logo_khamees.png' %}" alt="Al Khamees Logo" style="height:40px;">
    </div>
</div>

</body>
</html>
